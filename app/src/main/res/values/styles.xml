<?xml version="1.0" encoding="utf-8"?>
<resources>
    <!-- Base Application Theme -->
    <style name="Theme.HackerKeyboard" parent="Theme.AppCompat.DayNight.NoActionBar">
        <item name="colorPrimary">@color/tn_storm_magenta</item>
        <item name="preferenceTheme">@style/PreferenceThemeOverlay</item>
    </style>

    <!-- Theme for the Input Method Service (prevents AlertDialog crash with AppCompat) -->
    <style name="Theme.HackerKeyboard.Service" parent="android:Theme.DeviceDefault.InputMethod">
        <item name="colorPrimary">@color/tn_storm_magenta</item>
        <!-- Default Tokyo Night Attributes to prevent inflation crashes -->
        <item name="kbdColorBase">@color/tn_storm_bg</item>
        <item name="kbdColorAlpha">@color/tn_storm_bg_dark</item>
        <item name="kbdColorMod">@color/tn_storm_terminal_black</item>
        <item name="kbdColorHighlight">@color/tn_storm_bg_highlight</item>
        <item name="kbdColorText">@color/tn_storm_fg</item>
        <item name="kbdColorAccent">@color/tn_storm_magenta</item>
        <item name="kbdColorPopup">@color/tn_storm_green</item>
    </style>

    <!-- ============================================== -->
    <!-- TOKYO NIGHT SEMANTIC THEMES                    -->
    <!-- ============================================== -->

    <style name="Theme.TokyoNight.Storm" parent="LatinKeyboardBaseView">
        <item name="kbdColorBase">@color/tn_storm_bg</item>
        <item name="kbdColorAlpha">@color/tn_storm_bg_dark</item>
        <item name="kbdColorMod">@color/tn_storm_terminal_black</item>
        <item name="kbdColorHighlight">@color/tn_storm_bg_highlight</item>
        <item name="kbdColorText">@color/tn_storm_fg</item>
        <item name="kbdColorAccent">@color/tn_storm_magenta</item>
        <item name="kbdColorActive">@color/tn_storm_orange</item>
        <item name="kbdColorPopup">@color/tn_storm_green</item>
        
        <item name="keyBackground">@drawable/btn_key_tokyonight</item> <!-- Unified Drawable! -->
        <item name="keyTextColor">?attr/kbdColorText</item>
        <item name="keyHintColor">?attr/kbdColorText</item>
        <item name="keyCursorColor">?attr/kbdColorAccent</item>
        <item name="keyPreviewLayout">@layout/preview_tokyonight_dynamic</item> <!-- Unified Layout! -->
        <item name="popupLayout">@layout/popup_tokyonight_dynamic</item> <!-- Unified Layout! -->
    </style>

    <style name="Theme.TokyoNight.Night" parent="Theme.TokyoNight.Storm">
        <item name="kbdColorBase">@color/tn_night_bg</item>
        <item name="kbdColorAlpha">@color/tn_night_bg_dark</item>
        <item name="kbdColorMod">@color/tn_night_bg_dark</item>
        <item name="kbdColorHighlight">@color/tn_night_bg_highlight</item>
        <item name="kbdColorText">@color/tn_night_fg</item>
        <item name="kbdColorAccent">@color/tn_night_magenta</item>
        <item name="kbdColorActive">@color/tn_night_orange</item>
        <item name="kbdColorPopup">@color/tn_night_green</item>
    </style>

    <style name="Theme.TokyoNight.Moon" parent="Theme.TokyoNight.Storm">
        <item name="kbdColorBase">@color/tn_moon_bg</item>
        <item name="kbdColorAlpha">@color/tn_moon_bg_dark</item>
        <item name="kbdColorMod">@color/tn_moon_bg_dark</item>
        <item name="kbdColorHighlight">@color/tn_moon_bg_highlight</item>
        <item name="kbdColorText">@color/tn_moon_fg</item>
        <item name="kbdColorAccent">@color/tn_moon_magenta</item>
        <item name="kbdColorActive">@color/tn_moon_orange</item>
        <item name="kbdColorPopup">@color/tn_moon_green</item>
    </style>

    <style name="Theme.TokyoNight.Day" parent="Theme.TokyoNight.Storm">
        <item name="kbdColorBase">@color/tn_day_bg</item>
        <item name="kbdColorAlpha">@color/tn_day_bg_dark</item>
        <item name="kbdColorMod">@color/tn_day_terminal_black</item>
        <item name="kbdColorHighlight">@color/tn_day_bg_highlight</item>
        <item name="kbdColorText">@color/tn_day_fg</item>
        <item name="kbdColorAccent">@color/tn_day_magenta</item>
        <item name="kbdColorActive">@color/tn_day_orange</item>
        <item name="kbdColorPopup">@color/tn_day_green</item>
    </style>

    <!-- The actual Keyboard View Theme (Defaulting to Storm) -->
    <style name="LatinKeyboardBaseView">
        <item name="keyBackground">@drawable/btn_key_tokyonight</item>
        
        <item name="keyTextSize">@dimen/key_text_size</item>
        <item name="keyTextColor">?attr/kbdColorText</item>
        <item name="keyHintColor">?attr/kbdColorText</item>
        <item name="keyCursorColor">?attr/kbdColorAccent</item>
        
        <item name="keyPreviewLayout">@layout/preview_tokyonight_dynamic</item>
        <item name="keyPreviewOffset">@dimen/key_preview_offset</item>
        <item name="keyPreviewHeight">@dimen/key_preview_height</item>
        <item name="labelTextSize">@dimen/key_label_text_size</item>
        <item name="popupLayout">@layout/popup_tokyonight_dynamic</item>
        <item name="keyHysteresisDistance">@dimen/key_hysteresis_distance</item>
        <item name="verticalCorrection">@dimen/keyboard_vertical_correction</item>
        <item name="shadowColor">#00000000</item> <!-- No shadow in flat design -->
        <item name="shadowRadius">0</item>
        <item name="backgroundDimAmount">0.5</item>
        <item name="symbolColorScheme">white</item>
        <item name="recolorSymbols">false</item>
        <item name="backgroundAlpha">255</item>
    </style>

    <style name="KeyPreviewAnimation">
        <item name="android:windowEnterAnimation">@anim/popup_enter_modern</item>
        <item name="android:windowExitAnimation">@anim/key_preview_fadeout</item>
    </style>
    
    <style name="MiniKeyboardAnimation">
        <item name="android:windowEnterAnimation">@anim/popup_enter_modern</item>
        <item name="android:windowExitAnimation">@anim/mini_keyboard_fadeout</item>
    </style>

    <!-- ============================================== -->
    <!-- MATERIAL 3 SETTINGS THEMES (TOKYO NIGHT)      -->
    <!-- ============================================== -->

    <!-- Base Material 3 Theme for Settings UI -->
    <style name="Theme.HackerKeyboard.Material3" parent="Theme.Material3.DayNight.NoActionBar">
        <item name="android:statusBarColor">@android:color/transparent</item>
        <item name="android:navigationBarColor">@android:color/transparent</item>
        <item name="android:windowLightStatusBar">false</item>
        <item name="android:windowLightNavigationBar">false</item>
    </style>

    <!-- Tokyo Night Storm (Default) -->
    <style name="Theme.HackerKeyboard.Material3.Storm" parent="Theme.HackerKeyboard.Material3">
        <item name="colorPrimary">@color/tn_storm_magenta</item>
        <item name="colorOnPrimary">@color/tn_storm_bg</item>
        <item name="colorPrimaryContainer">@color/tn_storm_bg_dark</item>
        <item name="colorOnPrimaryContainer">@color/tn_storm_fg</item>

        <item name="colorSecondary">@color/tn_storm_cyan</item>
        <item name="colorOnSecondary">@color/tn_storm_bg</item>
        <item name="colorSecondaryContainer">@color/tn_storm_bg_dark</item>
        <item name="colorOnSecondaryContainer">@color/tn_storm_fg</item>

        <item name="colorTertiary">@color/tn_storm_blue</item>
        <item name="colorOnTertiary">@color/tn_storm_bg</item>
        <item name="colorTertiaryContainer">@color/tn_storm_bg_dark</item>
        <item name="colorOnTertiaryContainer">@color/tn_storm_fg</item>

        <item name="colorError">@color/tn_storm_red</item>
        <item name="colorOnError">@color/tn_storm_bg</item>
        <item name="colorErrorContainer">@color/tn_storm_bg_dark</item>
        <item name="colorOnErrorContainer">@color/tn_storm_red</item>

        <item name="android:colorBackground">@color/tn_storm_bg</item>
        <item name="colorOnBackground">@color/tn_storm_fg</item>
        <item name="colorSurface">@color/tn_storm_bg_dark</item>
        <item name="colorOnSurface">@color/tn_storm_fg</item>
        <item name="colorSurfaceVariant">@color/tn_storm_terminal_black</item>
        <item name="colorOnSurfaceVariant">@color/tn_storm_fg_dark</item>

        <item name="colorOutline">@color/tn_storm_fg_gutter</item>
        <item name="colorOutlineVariant">@color/tn_storm_bg_highlight</item>
    </style>

    <!-- Tokyo Night Night -->
    <style name="Theme.HackerKeyboard.Material3.Night" parent="Theme.HackerKeyboard.Material3">
        <item name="colorPrimary">@color/tn_night_magenta</item>
        <item name="colorOnPrimary">@color/tn_night_bg</item>
        <item name="colorPrimaryContainer">@color/tn_night_bg_dark</item>
        <item name="colorOnPrimaryContainer">@color/tn_night_fg</item>

        <item name="colorSecondary">@color/tn_night_cyan</item>
        <item name="colorOnSecondary">@color/tn_night_bg</item>
        <item name="colorSecondaryContainer">@color/tn_night_bg_dark</item>
        <item name="colorOnSecondaryContainer">@color/tn_night_fg</item>

        <item name="colorTertiary">@color/tn_night_blue</item>
        <item name="colorOnTertiary">@color/tn_night_bg</item>
        <item name="colorTertiaryContainer">@color/tn_night_bg_dark</item>
        <item name="colorOnTertiaryContainer">@color/tn_night_fg</item>

        <item name="colorError">@color/tn_night_red</item>
        <item name="colorOnError">@color/tn_night_bg</item>
        <item name="colorErrorContainer">@color/tn_night_bg_dark</item>
        <item name="colorOnErrorContainer">@color/tn_night_red</item>

        <item name="android:colorBackground">@color/tn_night_bg</item>
        <item name="colorOnBackground">@color/tn_night_fg</item>
        <item name="colorSurface">@color/tn_night_bg_dark</item>
        <item name="colorOnSurface">@color/tn_night_fg</item>
        <item name="colorSurfaceVariant">@color/tn_night_bg_dark</item>
        <item name="colorOnSurfaceVariant">@color/tn_night_fg_dark</item>

        <item name="colorOutline">@color/tn_night_fg_gutter</item>
        <item name="colorOutlineVariant">@color/tn_night_bg_highlight</item>
    </style>

    <!-- Tokyo Night Moon -->
    <style name="Theme.HackerKeyboard.Material3.Moon" parent="Theme.HackerKeyboard.Material3">
        <item name="colorPrimary">@color/tn_moon_magenta</item>
        <item name="colorOnPrimary">@color/tn_moon_bg</item>
        <item name="colorPrimaryContainer">@color/tn_moon_bg_dark</item>
        <item name="colorOnPrimaryContainer">@color/tn_moon_fg</item>

        <item name="colorSecondary">@color/tn_moon_cyan</item>
        <item name="colorOnSecondary">@color/tn_moon_bg</item>
        <item name="colorSecondaryContainer">@color/tn_moon_bg_dark</item>
        <item name="colorOnSecondaryContainer">@color/tn_moon_fg</item>

        <item name="colorTertiary">@color/tn_moon_blue</item>
        <item name="colorOnTertiary">@color/tn_moon_bg</item>
        <item name="colorTertiaryContainer">@color/tn_moon_bg_dark</item>
        <item name="colorOnTertiaryContainer">@color/tn_moon_fg</item>

        <item name="colorError">@color/tn_moon_red</item>
        <item name="colorOnError">@color/tn_moon_bg</item>
        <item name="colorErrorContainer">@color/tn_moon_bg_dark</item>
        <item name="colorOnErrorContainer">@color/tn_moon_red</item>

        <item name="android:colorBackground">@color/tn_moon_bg</item>
        <item name="colorOnBackground">@color/tn_moon_fg</item>
        <item name="colorSurface">@color/tn_moon_bg_dark</item>
        <item name="colorOnSurface">@color/tn_moon_fg</item>
        <item name="colorSurfaceVariant">@color/tn_moon_bg_dark</item>
        <item name="colorOnSurfaceVariant">@color/tn_moon_fg_dark</item>

        <item name="colorOutline">@color/tn_moon_fg_gutter</item>
        <item name="colorOutlineVariant">@color/tn_moon_bg_highlight</item>
    </style>

    <!-- Tokyo Night Day -->
    <style name="Theme.HackerKeyboard.Material3.Day" parent="Theme.HackerKeyboard.Material3">
        <item name="colorPrimary">@color/tn_day_blue</item>
        <item name="colorOnPrimary">#FFFFFF</item>
        <item name="colorPrimaryContainer">@color/tn_day_bg_highlight</item>
        <item name="colorOnPrimaryContainer">@color/tn_day_blue</item>

        <item name="colorSecondary">@color/tn_day_cyan</item>
        <item name="colorOnSecondary">#FFFFFF</item>
        <item name="colorSecondaryContainer">@color/tn_day_bg_highlight</item>
        <item name="colorOnSecondaryContainer">@color/tn_day_cyan</item>

        <item name="colorTertiary">@color/tn_day_magenta</item>
        <item name="colorOnTertiary">#FFFFFF</item>
        <item name="colorTertiaryContainer">@color/tn_day_bg_highlight</item>
        <item name="colorOnTertiaryContainer">@color/tn_day_magenta</item>

        <item name="colorError">@color/tn_day_red</item>
        <item name="colorOnError">#FFFFFF</item>
        <item name="colorErrorContainer">@color/tn_day_bg_highlight</item>
        <item name="colorOnErrorContainer">@color/tn_day_red</item>

        <item name="android:colorBackground">@color/tn_day_bg_dark</item>
        <item name="colorOnBackground">@color/tn_day_fg</item>
        <item name="colorSurface">@color/tn_day_bg</item>
        <item name="colorOnSurface">@color/tn_day_fg</item>
        <item name="colorSurfaceVariant">@color/tn_day_bg_highlight</item>
        <item name="colorOnSurfaceVariant">@color/tn_day_fg_dark</item>

        <item name="colorOutline">@color/tn_day_terminal_black</item>
        <item name="colorOutlineVariant">@color/tn_day_bg_highlight</item>

        <item name="android:windowLightStatusBar">true</item>
        <item name="android:windowLightNavigationBar">true</item>
    </style>
</resources>